# render.yaml
# Blueprint for deploying the multi-service cost manager application
# Strategy: Install all dependencies at the root and start each service from there.

services:
  - type: web
    name: costs-service
    runtime: node
    plan: free
    buildCommand: npm install
    startCommand: node costs-service/server.js
    envVars:
      - key: MONGO_URI
        sync: false # Set this value in the Render dashboard
      - key: NODE_ENV
        value: production

  - type: web
    name: users-service
    runtime: node
    plan: free
    buildCommand: npm install
    startCommand: node users-service/server.js
    envVars:
      - key: MONGO_URI
        sync: false # Set this value in the Render dashboard
      - key: NODE_ENV
        value: production

  - type: web
    name: logs-service
    runtime: node
    plan: free
    buildCommand: npm install
    startCommand: node logs-service/server.js
    envVars:
      - key: MONGO_URI
        sync: false # Set this value in the Render dashboard
      - key: NODE_ENV
        value: production

  - type: web
    name: admin-service
    runtime: node
    plan: free
    buildCommand: npm install
    startCommand: node admin-service/server.js
    envVars:
      - key: MONGO_URI
        sync: false # Set this value in the Render dashboard
      - key: NODE_ENV
        value: production